{"ast":null,"code":"var _jsxFileName = \"D:\\\\ReactPractice\\\\js-react-practice\\\\src\\\\site\\\\main.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo } from \"react\";\nimport BookList from \"../BookList\";\nimport SearchItem from \"../SearchItem\";\nimport axios from \"axios\";\nimport BookMoreInf from \"../BookMoreInf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst main = () => {\n  _s();\n  const [searchQuery, setSearch] = useState('');\n  const [openBook, setOpenBook] = useState(false);\n  const [books, setBooks] = useState([]);\n  const [toMoreInf, setToMoreInf] = useState();\n  const [chooseCateg, setChooseCateg] = useState('');\n  const [chooseSort, setChooseSort] = useState('relevance');\n  const categList = ['all', 'art', 'biography', 'computers', 'history', 'medical', 'poetry'];\n  const sortList = ['relevance', 'newest'];\n  const paginationStep = 9;\n  const [paginationRes, setPagination] = useState(9);\n  console.log(chooseCateg);\n  useMemo(() => {\n    if (searchQuery !== '') {\n      axios.get('https://www.googleapis.com/books/v1/volumes?q=' + searchQuery + '+subject:' + chooseCateg + '+orderBy:' + chooseSort + '&key=AIzaSyCbchQ4B-QN4WzoKXCZEGCOSNtvN3HDY78&maxResults=40').then(res => setBooks(res.data.items)).catch(err => console.log(err));\n    }\n    setBooks([]);\n    setPagination(paginationStep);\n  }, [searchQuery, chooseCateg, chooseSort]);\n  const getSearchQuery = searchValue => {\n    setSearch(searchValue);\n    setOpenBook(false);\n  };\n  const forOpenBook = book => {\n    setOpenBook(!openBook);\n    setToMoreInf(book);\n  };\n  const closeBook = () => {\n    setOpenBook(false);\n  };\n  const getCategory = category => {\n    if (category === 'all') {\n      setChooseCateg('');\n    } else setChooseCateg(category);\n    setOpenBook(false);\n  };\n  const getSort = sort => {\n    setChooseSort(sort);\n  };\n  const getPagination = paginationStep => {\n    if (typeof books !== 'undefined') {\n      if (paginationRes + paginationStep <= books.length) {\n        setPagination(paginationRes + paginationStep);\n      } else setPagination(books.length);\n    }\n  };\n  const pagbooks = () => {\n    let copyBooks = [];\n    copyBooks = [...books];\n    return copyBooks.splice(0, paginationRes);\n  };\n  console.log(books);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(SearchItem, {\n      searchFunction: getSearchQuery,\n      categList: categList,\n      getCategory: getCategory,\n      sortList: sortList,\n      getSort: getSort\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '25px'\n      },\n      children: [typeof books !== 'undefined' ? books.length : 0, \" results\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), openBook === false ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: searchQuery !== '' && typeof books !== 'undefined' ? /*#__PURE__*/_jsxDEV(BookList, {\n        books: pagbooks(),\n        forOpenBook: forOpenBook\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 22\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          fontSize: '30px',\n          textAlign: 'center',\n          marginTop: '30vh'\n        },\n        children: \"THE BOOK WAS NOT FOUND\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 22\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(BookMoreInf, {\n      book: toMoreInf,\n      closeBook: closeBook\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }, this), openBook === false && typeof books !== 'undefined' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: books.length !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          display: 'flex',\n          justifyContent: 'center',\n          marginBottom: '50px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => getPagination(paginationStep),\n          className: \"loadmoreBtn\",\n          children: \"Load More\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 114\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 22\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n_s(main, \"dAqlLkusEMSiGXJdZsnu+zET4Vk=\");\nexport default main;","map":{"version":3,"names":["React","useState","useMemo","BookList","SearchItem","axios","BookMoreInf","main","searchQuery","setSearch","openBook","setOpenBook","books","setBooks","toMoreInf","setToMoreInf","chooseCateg","setChooseCateg","chooseSort","setChooseSort","categList","sortList","paginationStep","paginationRes","setPagination","console","log","get","then","res","data","items","catch","err","getSearchQuery","searchValue","forOpenBook","book","closeBook","getCategory","category","getSort","sort","getPagination","length","pagbooks","copyBooks","splice","width","textAlign","marginBottom","fontSize","marginTop","display","justifyContent"],"sources":["D:/ReactPractice/js-react-practice/src/site/main.jsx"],"sourcesContent":["import React, { useState, useMemo } from \"react\";\r\nimport BookList from \"../BookList\";\r\nimport SearchItem from \"../SearchItem\";\r\nimport axios from \"axios\";\r\nimport BookMoreInf from \"../BookMoreInf\";\r\nconst main = () =>{\r\n    const [searchQuery, setSearch] = useState('')\r\n    const [openBook, setOpenBook] = useState(false)\r\n    const [books,setBooks] = useState([])\r\n    const [toMoreInf, setToMoreInf] = useState()\r\n    const [chooseCateg, setChooseCateg] = useState('')\r\n    const [chooseSort, setChooseSort] = useState('relevance')\r\n    const categList = ['all', 'art', 'biography', 'computers', 'history', 'medical', 'poetry']\r\n    const sortList = ['relevance', 'newest']\r\n    const paginationStep = 9\r\n    const [paginationRes, setPagination] = useState(9)\r\n    console.log(chooseCateg)\r\n    useMemo(()=>{\r\n        if(searchQuery !== ''){\r\n        axios.get('https://www.googleapis.com/books/v1/volumes?q='+searchQuery+'+subject:'+chooseCateg+'+orderBy:'+chooseSort+'&key=AIzaSyCbchQ4B-QN4WzoKXCZEGCOSNtvN3HDY78&maxResults=40')\r\n        .then(res => setBooks(res.data.items))\r\n        .catch(err => console.log(err))\r\n        }setBooks([])\r\n        setPagination(paginationStep)\r\n      }, [searchQuery, chooseCateg, chooseSort])\r\n    \r\n    const getSearchQuery = (searchValue)=>{\r\n        setSearch(searchValue)\r\n        setOpenBook(false)\r\n    }\r\n    const forOpenBook =(book)=>{\r\n        setOpenBook(!openBook)\r\n        setToMoreInf(book)\r\n    }\r\n    const closeBook = () =>{\r\n        setOpenBook(false)\r\n    }\r\n    const getCategory = (category)=>{\r\n        if(category === 'all'){\r\n            setChooseCateg('')\r\n        }else setChooseCateg(category)\r\n        setOpenBook(false)\r\n    } \r\n    const getSort = (sort)=>{\r\n        setChooseSort(sort)\r\n    }\r\n    const getPagination = (paginationStep) =>{\r\n        if(typeof(books) !== 'undefined'){\r\n            if(paginationRes + paginationStep <= books.length){\r\n                setPagination(paginationRes + paginationStep)\r\n            }else setPagination(books.length)\r\n        }\r\n    }\r\n    const pagbooks = ()=>{\r\n        let copyBooks = []\r\n        copyBooks = [...books]\r\n        return copyBooks.splice(0, paginationRes)\r\n    }\r\n\r\n    console.log(books)\r\n    return(\r\n        <div style={{width:'100%'}}>\r\n            <SearchItem searchFunction = {getSearchQuery} categList={categList} getCategory={getCategory} sortList={sortList} getSort={getSort}/>\r\n            <p style={{textAlign:'center', marginBottom: '25px'}}>{(typeof(books) !== 'undefined')?books.length:0} results</p>\r\n            {openBook === false\r\n                ? <>{(searchQuery !== '' && typeof(books) !== 'undefined')\r\n                    ?<BookList books={pagbooks()} forOpenBook={forOpenBook}/>\r\n                    :<h1 style={{fontSize:'30px', textAlign: 'center', marginTop: '30vh'}}>THE BOOK WAS NOT FOUND</h1>}\r\n                    </>\r\n                : <BookMoreInf book={toMoreInf} closeBook={closeBook}/>\r\n            } \r\n            {openBook === false && typeof(books) !== 'undefined' \r\n                ?<>{books.length !== 0 \r\n                    ?<div style={{width: '100%', display:'flex', justifyContent: 'center', marginBottom:'50px'}}><button onClick={()=>getPagination(paginationStep)} className=\"loadmoreBtn\">Load More</button></div>\r\n                    :<></>}</>\r\n                :<></>\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport default main;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}